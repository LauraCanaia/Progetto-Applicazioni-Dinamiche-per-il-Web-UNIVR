<div *ngIf="loading">
  Loading ...
</div>
<div *ngIf="error">
  Error :(
</div>
<main>

  <!-- <div *ngIf = "basket"> -->
    <li *ngFor="let movie of basket; index as i">
      <mat-card class="film-card">
        <mat-card-header>
          <mat-card-title>Movie {{i+1}}: {{movie.title}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>rental_rate : {{movie.rental_rate}}</p>
          <p>rental_duration : {{movie.rental_duration}}</p>
          <p>rental start date: </p>
          <mat-form-field class="calendar">
              <!-- <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker" (dateChange)="updateDate($event.value, movie.film_id)" placeholder="Choose a date"> -->
              <input matInput [min]="minDate" [max]="maxDate" [(ngModel)]="date.value" [matDatepicker]="picker" (dateChange)="updateDate($event.value, movie.film_id)" placeholder="Choose a date">
              <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
          <button mat-raised-button (click)="picker.open()">Open</button>

          <p>store_availability :
            <mat-chip-listbox aria-label = "store_availability-selection">
              <div *ngFor="let store of movie.store_availability">
                <mat-chip-option color = "accent" [selected]="isStoreSelected(movie.film_id, store.store_id)" (selectionChange)="onSelectStore($event.selected, store.store_id, movie.film_id)">{{store.address.address + ", " + store.address.district}}</mat-chip-option>
              </div>
            </mat-chip-listbox>
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button class = "Delete" (click)="onClickDelete(movie.film_id)">
            Delete {{movie.title}}
          </button>
        </mat-card-actions>
      </mat-card>
    </li>

    <mat-card-actions>
      <button mat-raised-button class = "Rent" (click)="onClickRent($event)">
        Rent
      </button>
    </mat-card-actions>
  <!-- </div> -->
</main>

<ng-template #movie>
<p>...
</p>
</ng-template>
